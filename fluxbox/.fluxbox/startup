#!/bin/bash
#
# Author: Petr Zemek <s3rvac@petrzemek.net>
#
# Fluxbox startup script.
#

# Start fluxbox.

fluxbox &
fbpid=$!

sleep 1
{
	~/.fluxbox/scripts/setup-background.sh &
	~/.fluxbox/scripts/setup-keyboard.sh &
	~/.fluxbox/scripts/setup-mouse.sh &
	~/.fluxbox/scripts/setup-automatic-screen-locking.sh &
	~/.fluxbox/scripts/enable-notifications.sh &

	# Fix black screen in Zoom when (1) sharing a screen on which someones
	# starts drawing or (2) sharing a screen from a webinar.
	# https://support.zoom.com/hc/en/article?id=zm_kb&sysparm_article=KB0060527
	xcompmgr -c -l0 -t0 -r0 -o.00 &

	# A list of applications to be started automatically.
	cmst &
	clementine &
	copyq &
	goldendict &
	protonmail-bridge &
	signal-desktop &
} &

wait $fbpid
